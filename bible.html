<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="UTF-8">
<title>Біблія (українська)</title>
<link rel="stylesheet" href="bible.css">
</head>
<body>

<h2>📖 Біблія (українська)</h2>

<label>Книга:</label>
<select id="bookSelect"></select>
<br>
<label>Глава:</label>
<select id="chapterSelect"></select>

<div id="verses"></div>

<hr>

<h3>🔍 Пошук</h3>
<input type="text" id="searchInput" placeholder="Введіть слово або фразу">
<button id="searchBtn">Шукати</button>
<div id="results"></div>

<script src="bible.js"></script>
<script>
async function init() {
    await BibleAPI.load("bible_ua.json");

    const bookSelect = document.getElementById("bookSelect");
    const chapterSelect = document.getElementById("chapterSelect");
    const versesDiv = document.getElementById("verses");
    const resultsDiv = document.getElementById("results");
    const searchInput = document.getElementById("searchInput");

    // Заполнение списка книг
    BibleAPI.getBooks().forEach(book => {
        const opt = document.createElement("option");
        opt.value = book.number;
        opt.textContent = `${book.number}. ${book.name}`;
        bookSelect.appendChild(opt);
    });

    function fillChapters() {
        chapterSelect.innerHTML = "";
        BibleAPI.getChapters(bookSelect.value).forEach(num => {
            const opt = document.createElement("option");
            opt.value = num;
            opt.textContent = `Глава ${num}`;
            chapterSelect.appendChild(opt);
        });
        showVerses();
    }

    function showVerses() {
        versesDiv.innerHTML = "";
        BibleAPI.getVerses(bookSelect.value, chapterSelect.value)
            .forEach(v => {
                const p = document.createElement("div");
                p.className = "verse";
                p.innerHTML = `<span>${v.number}</span> ${v.text}`;
                versesDiv.appendChild(p);
            });
    }

    function search() {
        resultsDiv.innerHTML = "";
        const q = searchInput.value.trim();
        if (!q) return;
        const found = BibleAPI.search(q);
        if (!found.length) {
            resultsDiv.textContent = "Нічого не знайдено.";
            return;
        }
        found.forEach(r => {
            const div = document.createElement("div");
            div.className = "search-result";
            div.innerHTML = `<b>${r.book} ${r.chapter}:${r.verse}</b> — ${r.text}`;
            resultsDiv.appendChild(div);
        });
    }

    bookSelect.addEventListener("change", fillChapters);
    chapterSelect.addEventListener("change", showVerses);
    document.getElementById("searchBtn").addEventListener("click", search);

    fillChapters();
}

init();
</script>
</body>
</html>
